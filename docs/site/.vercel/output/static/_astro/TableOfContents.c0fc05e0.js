import{r as n}from"./index.f1bc5ebf.js";import{f as g,v as f,B as d}from"./pluto.es.a1d242b9.js";import{j as t}from"./jsx-runtime.109e40f8.js";const{replace:v}="",x=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34);/g,j={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"'},O=s=>j[s],w=s=>v.call(s,x,O),y=({headings:s=[]})=>{const o=n.useRef(),a="on-this-page-heading",p=n.useRef([]),[u,m]=n.useState("");return n.useEffect(()=>{const e=()=>{const c=document.querySelectorAll("article :is(h1, h2, h3, h4)");p.current=Array.from(c).map(r=>({id:r.id,topOffset:r.getBoundingClientRect().top+window.scrollY}))};return e(),window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[]),n.useEffect(()=>{if(o.current==null)return;const e=i=>{for(const l of i)if(l.isIntersecting){const{id:h}=l.target;if(h===a)continue;m(l.target.id);break}},c={rootMargin:"-100px 0% -66%",threshold:1},r=new IntersectionObserver(e,c);return document.querySelectorAll("article :is(h1,h2,h3)").forEach(i=>r.observe(i)),()=>r.disconnect()},[o.current]),t.jsxs(g,{style:{paddingLeft:"2rem",transition:"0.2s ease-in-out"},children:[t.jsx(f,{id:a,className:"heading",children:t.jsx(f.Title,{level:"h3",children:"On this page"})}),t.jsx("div",{ref:o,children:t.jsx(d,{value:u,children:s.filter(({depth:e})=>e>1&&e<3).map(e=>t.jsx(d.Item.Link,{href:`#${e.slug}`,level:"p",itemKey:e.slug,id:e.slug,className:`header-link depth-${e.depth} ${u===e.slug?"current-header-link":""}`.trim(),children:w(e.text)},e.slug))})})]})};export{y as TableOfContents};
